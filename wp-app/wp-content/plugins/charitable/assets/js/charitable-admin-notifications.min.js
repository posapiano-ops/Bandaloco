"use strict";var WPCharitableAdminNotifications=window.WPCharitableAdminNotifications||function(e,a,$){$("#charitable-notifications").insertAfter($(".wp-header-end"));var n={$notifications:$("#charitable-notifications"),$nextButton:$("#charitable-notifications .navigation .next"),$prevButton:$("#charitable-notifications .navigation .prev"),$adminBarCounter:$("#wp-admin-bar-charitable-menu .charitable-menu-notification-counter"),$adminBarMenuItem:$("#wp-admin-bar-charitable-notifications")},t={init:function(){$(t.ready)},ready:function(){t.updateNavigation(),t.events()},events:function(){n.$notifications.on("click",".dismiss",t.dismiss).on("click",".next",t.navNext).on("click",".prev",t.navPrev)},dismiss:function(e){if(0!==n.$currentMessage.length){var a=parseInt(n.$adminBarCounter.text(),10);a>1?(--a,n.$adminBarCounter.html(a)):(n.$adminBarCounter.remove(),n.$adminBarMenuItem.remove());var i=n.$nextMessage.length<1?n.$prevMessage:n.$nextMessage,s=n.$currentMessage.data("message-id");0===i.length?n.$notifications.remove():(n.$currentMessage.remove(),i.addClass("current"),t.updateNavigation());var r={action:"charitable_notification_dismiss",nonce:charitable_admin.nonce,id:s};$.post(charitable_admin.ajax_url,r,(function(e){e.success||console.log(e)})).fail((function(e,a,n){console.log(e.responseText)}))}},navNext:function(e){n.$nextButton.hasClass("disabled")||(n.$currentMessage.removeClass("current"),n.$nextMessage.addClass("current"),t.updateNavigation())},navPrev:function(e){n.$prevButton.hasClass("disabled")||(n.$currentMessage.removeClass("current"),n.$prevMessage.addClass("current"),t.updateNavigation())},updateNavigation:function(){n.$currentMessage=n.$notifications.find(".charitable-notifications-message.current"),n.$nextMessage=n.$currentMessage.next(".charitable-notifications-message"),n.$prevMessage=n.$currentMessage.prev(".charitable-notifications-message"),0===n.$nextMessage.length?n.$nextButton.addClass("disabled"):n.$nextButton.removeClass("disabled"),0===n.$prevMessage.length?n.$prevButton.addClass("disabled"):n.$prevButton.removeClass("disabled")}};return t}(document,window,jQuery);WPCharitableAdminNotifications.init();