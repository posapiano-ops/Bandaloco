/*!  1.6.61 2022-07-13 16:23 */
CHARITABLE=window.CHARITABLE||{},function(t){function e(t){var e=t.target.value,n=/^3(4|7)/.test(e),a=n?17:19,i=this.selectionStart,r="";e.split("").forEach(function(t){var e=r.length;if(n)if(4!==e&&11!==e||" "===t){if(4!==e&&11!==e&&" "===t)return}else r+=" ",i===e+1&&i++;else if((e+1)%5==0&&" "!==t)r+=" ",i===e+1&&i++;else if((e+1)%5!=0&&" "===t)return;r+=t}),/[^\d^\s]/.test(e)||e.length>a?(t.target.value=o,this.setSelectionRange(i-1,i-1)):(o=t.target.value=r,this.setSelectionRange(i,i))}var o="",n=(CHARITABLE.Donation_Form.prototype.is_valid_card_number=function(){t=[0,2,4,6,8,1,3,5,7,9];for(var t,e,n=this.get_cc_number().replace(/ /g,""),a=n.length,i=1,r=0;a;)e=parseInt(n.charAt(--a),10),r+=(i^=1)?t[e]:e;return r&&0==r%10},CHARITABLE.Donation_Form.prototype.validate_card_number=function(){return 0===t("#charitable-gateway-fields-"+this.get_payment_method()+" #charitable_field_cc_number").length||(!1!==this.is_valid_card_number()||(this.add_error(CHARITABLE_VARS.error_invalid_cc_number),!1))},t("body"));n.on("charitable:form:initialize",function(){n.on("input",'input[name="cc_number"]',e)}),n.on("charitable:form:validate",function(t,e){"make_donation"===e.get_input("charitable_action").val()&&e.validate_card_number()})}(jQuery);